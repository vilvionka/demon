;/*
jbForm v0.81 2013-2015
by Jet Bit - http://JetBit.ru

For more information, visit:
http://jetbit.ru/market/jbcallme
http://jbCallMe.ru/
*/!function(e,t,i,o){function n(t,i){this.element=t,this.options=e.extend({},l,i),this._defaults=l,this._name=a,this.init()}var a="jbform",l={title: '\u041e\u0431\u0440\u0430\u0442\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a',progress: '\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u0441\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443',success: '\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e',fail: '\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e',modal:!0,identify:!1,delay:4e3,fields:{},onShow:function(){},onSendSuccess:function(){},onSendFail:function(){},copyright:!0,captcha:!1,dev_mode:!0,key:"null",postfix:"default"};n.prototype.init=function(){return this.build()},n.prototype.build=function(){var n=this;if(!e("#jbForm_overlay").length&&n.options.modal&&(e('<div id="jbForm_overlay" class="jbForm_overlay" style="display:none"></div>').appendTo(e("body")),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&e("body").addClass("jbIsMobile")),!e("#jbForm_"+n.options.postfix).length){var a="jbIframe_"+Math.random().toString(36).substring(5),r='<div id="jbForm_'+n.options.postfix+'" class="jbForm'+(n.options.modal?"":" jbInbuilt")+'"><div class="jb_inset"><div class="jb_title">'+n.options.title+"</div>"+(n.options.modal?'<a title="\u0417\u0430\u043a\u0440\u044b\u0442\u044c" class="jb_close">\u00D7</a>':"")+'<form class="jb_form" action="'+("https:"==location.protocol?"https:":"http:")+'//jbcallme.ru/api/" enctype="multipart/form-data" accept-charset="utf-8" method="POST" target="'+a+'"></form><div class="jb_success">'+n.options.success+'</div><div class="jb_progress">'+n.options.progress+'</div><div class="jb_fail">'+n.options.fail+"</div></div></div>";n.options.modal?e(r).appendTo(e("body")):e(n.element).html(r),n.$container=e("#jbForm_"+n.options.postfix),n.$success=n.$container.find(".jb_success").hide().hide(),n.$fail=n.$container.find(".jb_fail").hide(),n.$progress=n.$container.find(".jb_progress").hide(),n.$overlay=e("#jbForm_overlay"),n.$inset=n.$container.find(".jb_inset"),n.options.copyright&&n.$inset.append(e('\u003c\u0061\u002f\u003e').html('\u00a9 \u006a\u0062\u0043\u0061\u006c\u006c\u004d\u0065\u002e\u0072\u0075').attr('\u0068\u0072\u0065\u0066','\u0068\u0074\u0074\u0070\u003a\u002f\u002f\u006a\u0062\u0063\u0061\u006c\u006c\u006d\u0065\u002e\u0072\u0075').attr('\u0074\u0061\u0072\u0067\u0065\u0074','\u005f\u0062\u006c\u0061\u006e\u006b').addClass("\u006a\u0062\u005f\u0064\u0065\u0076")),n.$form=n.$container.find(".jb_form"),e.each(n.options.fields,function(t,i){var o="";if(i.type&&"textarea"==i.type)o="<textarea "+(i.required?'required="required" ':"")+(i.readonly?'readonly="readonly" ':"")+(i.input_class?'class="'+i.input_class+'" ':"")+(i.placeholder?'placeholder="'+i.placeholder+'" ':"")+'name="'+t+'">'+(i.value?i.value:"")+"</textarea>";else if(i.type&&"select"==i.type){o="<select "+(i.input_class?'class="'+i.input_class+'" ':"")+(i.readonly?'readonly="readonly" ':"")+'name="'+t+'">',o+=i.placeholder?'<option disabled selected hidden>'+i.placeholder+"</option>":"";for(var a=0;a<i.options.length;a++)o+='<option value="'+i.options[a]+'"'+(i.value&&i.value==i.options[a]?' selected="selected"':"")+">"+i.options[a]+"</option>";o+="</select>"}else if(i.type&&"checkbox"==i.type)o='<label class="jbForCheckbox"><input '+(i.input_class?'class="'+i.input_class+'" ':"")+(i.readonly?'readonly="readonly" ':"")+(i.required?'required="required" ':"")+(i.checked?'checked="checked" ':"")+'type="checkbox" value="'+(i.value?i.value:"Yes")+'" name="'+t+'"/> '+i.label+"</label>";else if(i.type&&"radio"==i.type){o='<div class="jb_ingroup">';for(var a=0;a<i.options.length;a++)o+='<label class="jbForRadio"><input '+(i.input_class?'class="'+i.input_class+'" ':"")+(i.required?'required="required" ':"")+(i.readonly?'readonly="readonly" ':"")+'type="radio" value="'+i.options[a]+'" name="'+t+'"'+(i.value&&i.value==i.options[a]?' checked="checked"':"")+"/> "+i.options[a]+"</label>";o+="</div>"}else i.type&&"file"==i.type?o='<div class="jbFileUpload"><span>'+(i.placeholder?i.placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b")+"</span><input onchange=\"this.innerHTML=this.innerHTML;var fname=jQuery(this).parents('.jb_input').find('.jbFileName').text('');if(window.File && window.FileReader && window.FileList){for(var i=0;i<this.files.length;i++){fname.append('<span>'+this.files[i].name+'</span>')}}else{'<span>'+fname.append($(this).val()+'</span>')}\" "+(i.required?'required="required" ':"")+(i.multiple?'multiple="multiple" ':"")+'type="file" name="'+t+'[]" /></div><div class="jbFileName"></div>':(i.input_class=jQuery.inArray(i.type,["date","time","datetime"])>=0?"jb_type_"+i.type+(i.input_class?" "+i.input_class:""):i.input_class,o="<input "+(i.required?'required="required" ':"")+(i.readonly?'readonly="readonly" ':"")+(i.pattern?'pattern="'+i.pattern+'" ':"")+(i.placeholder?'placeholder="'+i.placeholder+'" ':"")+(i.input_class?'class="'+i.input_class+'" ':"")+(i.value?'value="'+i.value+'" ':"")+'type="'+(i.type&&jQuery.inArray(i.type,["submit","hidden","text","email","number","tel"])>=0?i.type:"text")+'" name="'+t+'" />');"submit"==i.type&&n.options.captcha&&!n.$form.find(".jb_captcha")[0]&&e('<div class="jb_input jb_captcha"><img onClick="javascript:this.src=\''+("https:"==location.protocol?"https:":"http:")+'//jbcallme.ru/api/captcha.png?\'+Math.random();" alt=""/><input type="text" class="jb_captcha_text" name="jb_captcha" required="required" value=""/></div>').appendTo(n.$form),e(("hidden"!=i.type?'<div class="jb_input'+(i.wrapper_class?" "+i.wrapper_class:"")+'">'+(i.label&&"checkbox"!=i.type?"<label>"+i.label+"</label>":""):"")+o+("hidden"!=i.type?"</div>":"")).appendTo(n.$form)}),e('<input type="hidden" name="jb_API_key" value="'+n.options.key+'"/>').appendTo(n.$form),n.options.identify&&e('<input type="hidden" name="jb_vid" value="'+n.getCookie("mvkp_vid")+'"/>').appendTo(n.$form),"placeholder"in i.createElement("input")||n.$form.find("[placeholder]").focus(function(){var t=e(this);t.val()==t.attr("placeholder")&&(t.val(""),t.removeClass("placeholder"))}).blur(function(){var t=e(this);(""==t.val()||t.val()==t.attr("placeholder"))&&(t.addClass("placeholder"),t.val(t.attr("placeholder")))}),n.options.modal?(e(i).bind("keydown",function(e){return 27==e.which?(n.end(),!1):void 0}),n.$container.hide().find(".jb_close").on("click",function(){return n.end(),!1}),n.$overlay.hide()):n.show(),n.$form.on("submit",function(i){e('#mvkp_widget').remove();var r=e("<iframe/>",{id:a,name:a,src:"javascript:;",width:"0",height:"0",tabindex:"-1",style:"display:none;border:0px none"});n.$form.append(r);var s={};r.load(function(){setTimeout(function(){e("#"+a).remove();var i=s[a];if(i===o)n.$progress.hide(),n.$fail.html('<div class="error_msg">\u0424\u043E\u0440\u043C\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u043D\u0430 \u0441\u0430\u0439\u0442\u0435, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0432\u044B \u0443\u043A\u0430\u0437\u0430\u043B\u0438 \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445.</div> <br/><small>\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u0431\u044B\u043B\u0430 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C.</small>').show(),n.options.onSendFail.call();else if(i.length){n.$progress.hide();var r;try{r=jQuery.parseJSON(i)}catch(l){r=jQuery.parseJSON('{"result":"fail"}')}if("success"==r.result)n.$success.show(),n.options.onSendSuccess.call();else{if("wrong captcha"==r.message)return n.$form.find(".jb_captcha img").attr("src",("https:"==location.protocol?"https:":"http:")+"//jbcallme.ru/api/captcha.png?"+Math.random()),n.$container.find("form").show(),n.$form.find(".jb_captcha_text").addClass("jbError").val(""),e(t).resize(),!1;r.message&&n.options.dev_mode&&n.$fail.html('<div class="error_msg">'+r.message+"</div>").show(),n.$fail.show(),n.options.onSendFail.call()}}setTimeout(function(){n.$fail.html(n.options.fail),n.end()},n.options.delay),delete s[a]},700)}),e(t).on("message",function(e){e.originalEvent.origin==("https:"==location.protocol?"https:":"http:")+"//jbcallme.ru"&&(s[a]=e.originalEvent.data)}),n.submit()||i.preventDefault()})}n.options.modal&&e(n.element).on("click",function(){return n.show(),!1})},n.prototype.submit=function(){var i=this,o=0;return i.$container=e("#jbForm_"+i.options.postfix),i.$container.find(".jbError").removeClass("jbError"),i.$container.find("input[type=text],input[type=email],input[type=number],input[type=tel],textarea").each(function(){e(this).val(e.trim(e(this).val()))}),i.$container.find("input[required], select[required], textarea[required]").each(function(){var t=e(this);(""==t.val()||t.val()==t.attr("placeholder")||"checkbox"==t.prop("type")&&!t.prop("checked"))&&(t.addClass("jbError").focus(function(){e(this).removeClass("jbError")}),o++)}),o?!1:(i.$container.find("[placeholder]").each(function(){var t=e(this);t.val()==t.attr("placeholder")&&t.val("")}),i.$container.find(".jb_progress").show(),i.$container.find("form").hide(),e(t).resize(),!0)},n.prototype.end=function(){var t=this;t.$container=e("#jbForm_"+t.options.postfix),e("#jbForm_"+t.options.postfix).find("iframe").remove(),t.options.modal?(t.$overlay=e("#jbForm_overlay").fadeOut(),t.$container.hide(),e("body").removeClass("jbNoScroll")):(t.$form[0].reset(),t.$container.find("[type=file]").each(function(){e(this)[0].innerHTML=e(this)[0].innerHTML}),e(".jbForm .jb_success, .jbForm .jb_fail, .jbForm .jb_progress").hide(),t.$form=t.$container.find(".jb_form").show())},n.prototype.getCookie=function(e){var t=" "+i.cookie,o=" "+e+"=",n=null,a=0,r=0;return t.length>0&&(a=t.indexOf(o),-1!=a&&(a+=o.length,r=t.indexOf(";",a),-1==r&&(r=t.length),n=unescape(t.substring(a,r)))),n},n.prototype.show=function(){var o=this;o.options.identify&&setTimeout(function(){d=i.getElementsByTagName("script")[0],s=i.createElement("script"),r=escape(i.referrer),s.type="text/javascript",s.async=!0,s.src="http://inc.metrika-vk.ru/partner_run.js?p=f1fc0d497251fcb637916f4168b82fcd&ref="+encodeURIComponent(r)+"&vid="+o.getCookie("mvkp_vid")+"&extra_jbcallme_key="+o.options.key+"&rnd="+Math.random(),d.parentNode.insertBefore(s,d)},1),o.$container=e("#jbForm_"+o.options.postfix),o.$inset=o.$container.find(".jb_inset"),o.$form=o.$container.find(".jb_form").show(),o.$overlay=e("#jbForm_overlay"),o.$form[0].reset(),o.$other=e(".jbForm:not(#jbForm_"+o.options.postfix+"):not(.jbInbuilt)").hide(),e(".jbForm:not(.jbInbuilt) .jb_success, .jbForm:not(.jbInbuilt) .jb_fail, .jbForm:not(.jbInbuilt) .jb_progress").hide(),o.$container.find("[placeholder]").blur(),o.$container.find("[type=file]").each(function(){e(this)[0].innerHTML=e(this)[0].innerHTML}),o.options.captcha&&o.$form.find(".jb_captcha img").attr("src",("https:"==location.protocol?"https:":"http:")+"//jbcallme.ru/api/captcha.png?"+Math.random()),o.$container.find(".jbFileName").html(""),o.$container.find("input,textarea,select").each(function(){e(o.element).attr("data-"+e(this).attr("name"))&&e(this).val(e(o.element).data(e(this).attr("name")))}),o.options.modal&&(e("body").addClass("jbNoScroll"),o.$overlay.fadeIn()),o.$container.show(),o.$container.find(".jbError").removeClass("jbError"),e(t).resize(function(){if(o.options.modal){var i=e(t).height()-o.$inset.outerHeight();i>0&&!e("body").hasClass("jbIsMobile")?o.$inset.css("margin-top",parseInt(i/2)):o.$inset.css("margin-top",0)}}),e(t).resize(),o.options.onShow.call()},e.fn[a]=function(t){return this.each(function(){e.data(this,"plugin_"+a)||e.data(this,"plugin_"+a,new n(this,t))})}}(jQuery,window,document);

/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/
(function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,a=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),o=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var c,l,s,u,f,h;return!t&&this.length>0?(c=e(this[0]),c.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,s=[],u=h=t.length,f=null,e.each(t.split(""),function(e,t){"?"==t?(h--,u=e):l[t]?(s.push(RegExp(l[t])),null===f&&(f=s.length-1)):s.push(null)}),this.trigger("unmask").each(function(){function c(e){for(;h>++e&&!s[e];);return e}function d(e){for(;--e>=0&&!s[e];);return e}function m(e,t){var n,a;if(!(0>e)){for(n=e,a=c(t);h>n;n++)if(s[n]){if(!(h>a&&s[n].test(R[a])))break;R[n]=R[a],R[a]=r.placeholder,a=c(a)}b(),x.caret(Math.max(f,e))}}function p(e){var t,n,a,i;for(t=e,n=r.placeholder;h>t;t++)if(s[t]){if(a=c(t),i=R[t],R[t]=n,!(h>a&&s[a].test(i)))break;n=i}}function g(e){var t,n,a,r=e.which;8===r||46===r||i&&127===r?(t=x.caret(),n=t.begin,a=t.end,0===a-n&&(n=46!==r?d(n):a=c(n-1),a=46===r?c(a):a),k(n,a),m(n,a-1),e.preventDefault()):27==r&&(x.val(S),x.caret(0,y()),e.preventDefault())}function v(t){var n,a,i,l=t.which,u=x.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(0!==u.end-u.begin&&(k(u.begin,u.end),m(u.begin,u.end-1)),n=c(u.begin-1),h>n&&(a=String.fromCharCode(l),s[n].test(a)&&(p(n),R[n]=a,b(),i=c(n),o?setTimeout(e.proxy(e.fn.caret,x,i),0):x.caret(i),r.completed&&i>=h&&r.completed.call(x))),t.preventDefault())}function k(e,t){var n;for(n=e;t>n&&h>n;n++)s[n]&&(R[n]=r.placeholder)}function b(){x.val(R.join(""))}function y(e){var t,n,a=x.val(),i=-1;for(t=0,pos=0;h>t;t++)if(s[t]){for(R[t]=r.placeholder;pos++<a.length;)if(n=a.charAt(pos-1),s[t].test(n)){R[t]=n,i=t;break}if(pos>a.length)break}else R[t]===a.charAt(pos)&&t!==u&&(pos++,i=t);return e?b():u>i+1?(x.val(""),k(0,h)):(b(),x.val(x.val().substring(0,i+1))),u?t:f}var x=e(this),R=e.map(t.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),S=x.val();x.data(e.mask.dataName,function(){return e.map(R,function(e,t){return s[t]&&e!=r.placeholder?e:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;S=x.val(),e=y(),n=setTimeout(function(){b(),e==t.length?x.caret(0,e):x.caret(e)},10)}).bind("blur.mask",function(){y(),x.val()!=S&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(a,function(){setTimeout(function(){var e=y(!0);x.caret(e),r.completed&&e==x.val().length&&r.completed.call(x)},0)}),y()}))}})})(jQuery);